# Manual FreeBSD 11.2 installation to a ZFS

This repository pertains to a VirtualBox virtual machine of mine, that dual boots Arch Linux on a ext4 filesystem and FreeBSD 11.2 on a ZFS (both on the same virtual disk). 

Boot the live DVD image (filename: [FreeBSD-11.2-RELEASE-amd64-dvd1.iso](https://download.freebsd.org/ftp/releases/amd64/amd64/ISO-IMAGES/11.2/FreeBSD-11.2-RELEASE-amd64-dvd1.iso)), then run [`live-cd.sh`](https://github.com/fusion809/freebsd-scripts/blob/master/zfs-manual-install/live-cd.sh). Then, with the live DVD image inserted, boot from it, but at the bootloader start press <kbd>Esc</kbd>. At the "ok" prompt run what is in [`ok-prompt.sh`](https://github.com/fusion809/freebsd-scripts/blob/master/zfs-manual-install/ok-prompt.sh). Then in the newly booted system run what is in [`post-successful-boot.sh`](https://github.com/fusion809/freebsd-scripts/blob/master/zfs-manual-install/post-successful-boot.sh). To make the system automatically connect to the Internet on boot at [`rc.local`](https://github.com/fusion809/freebsd-scripts/blob/master/zfs-manual-install/rc.local) to `/etc`. 

[`Bootloader.md`](https://github.com/fusion809/freebsd-scripts/blob/master/zfs-manual-install/Bootloader.md) has the command required to change from booting with GRUB to using FreeBSD's bootloader. It has to be run from a FreeBSD live session (sellect 'Shell' from the dialog that pops up after the live session boots).

The main source of this information is this FreeBSD forum post from 2017: https://forums.freebsd.org/threads/installing-freebsd-manually-no-installer.63201/ (archived [here](https://web.archive.org/web/20181110072004/https://forums.freebsd.org/threads/installing-freebsd-manually-no-installer.63201/)). Some parts I conjured by myself, based partly on experimentation and partly on past FreeBSD experience, like [`rc.local`](https://github.com/fusion809/freebsd-scripts/blob/master/zfs-manual-install/rc.local) and the last line of [`post-successful-boot.sh`](https://github.com/fusion809/freebsd-scripts/blob/master/zfs-manual-install/post-successful-boot.sh). 

[`40_custom`](https://github.com/fusion809/freebsd-scripts/blob/master/zfs-manual-install/40_custom) is what, if placed in `/etc/grub.d`, will cause `grub-mkconfig -o /boot/grub/grub.cfg` to generate a GRUB configuration that will offer FreeBSD as a boot option, along with Arch. 
